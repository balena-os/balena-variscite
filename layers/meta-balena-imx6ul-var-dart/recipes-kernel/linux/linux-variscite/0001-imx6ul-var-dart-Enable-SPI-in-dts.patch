From e313027513d960915aa90addf0c6fc8b74c9dd19 Mon Sep 17 00:00:00 2001
From: Florin Sarbu <florin@balena.io>
Date: Fri, 21 Nov 2025 12:48:15 +0000
Subject: [PATCH] imx6ul-var-dart: Enable SPI in dts

This is based on https://variwiki.com/index.php?title=DART-6UL_SPI

Upstream-status: Inappropriate [configuration]

Signed-off-by: Alexandru Costache <alexandru@balena.io>
Signed-off-by: Florin Sarbu <florin@balena.io>
---
 .../arm/boot/dts/nxp/imx/imx6ul-var-dart.dtsi | 23 +++++++++++++++++++
 1 file changed, 23 insertions(+)

diff --git a/arch/arm/boot/dts/nxp/imx/imx6ul-var-dart.dtsi b/arch/arm/boot/dts/nxp/imx/imx6ul-var-dart.dtsi
index 7b83b666a312..251189932709 100644
--- a/arch/arm/boot/dts/nxp/imx/imx6ul-var-dart.dtsi
+++ b/arch/arm/boot/dts/nxp/imx/imx6ul-var-dart.dtsi
@@ -21,9 +21,32 @@ pinctrl_enet1_gpio: enet1_gpiogrp {
 			MX6UL_PAD_SNVS_TAMPER0__GPIO5_IO00	0x1b0b0 /* fec1 reset */
 		>;
 	};
+
+	pinctrl_ecspi1_1: ecspi1grp {
+		fsl,pins = <
+			MX6UL_PAD_CSI_DATA07__ECSPI1_MISO       0x100b1
+			MX6UL_PAD_CSI_DATA06__ECSPI1_MOSI       0x100b1
+			MX6UL_PAD_CSI_DATA04__ECSPI1_SCLK       0x100b1
+			MX6UL_PAD_CSI_DATA05__GPIO4_IO26        0x100b1
+		>;
+	};
 };
 
 &adc1 {
 	vref-supply = <&touch_3v3_regulator>;
 	status = "okay";
 };
+
+&ecspi1 {
+	fsl,spi-num-chipselects = <1>;
+	cs-gpios = <&gpio4 26 0>;
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_ecspi1_1>;
+	status = "okay";
+
+	chip1: spidev@0 {
+		compatible = "var,spidev";
+		spi-max-frequency = <12000000>;
+		reg = <0>;
+	};
+};
-- 
2.34.1

